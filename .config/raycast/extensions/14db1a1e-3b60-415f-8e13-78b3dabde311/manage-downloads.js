"use strict";var D=Object.create;var m=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),C=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},h=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of S(t))!L.call(e,a)&&a!==r&&m(e,a,{get:()=>t[a],enumerable:!(o=F(t,a))||o.enumerable});return e};var M=(e,t,r)=>(r=e!=null?D(x(e)):{},h(t||!e||!e.__esModule?m(r,"default",{value:e,enumerable:!0}):r,e)),_=e=>h(m({},"__esModule",{value:!0}),e);var A=O((V,y)=>{"use strict";var q=require("os"),u=q.homedir();y.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return u?e.replace(/^~(?=$|\/|\\)/,u):e}});var H={};C(H,{default:()=>G});module.exports=_(H);var i=require("@raycast/api"),k=require("react");var c=require("@raycast/api"),s=require("fs"),g=require("path"),w=M(A()),l=require("react/jsx-runtime"),d=(0,c.getPreferenceValues)(),p=(0,w.default)(d.downloadsFolder??"~/Downloads"),I=d.showHiddenFiles,E=d.fileOrder;function T(){return(0,s.readdirSync)(p).filter(t=>I||!t.startsWith(".")).map(t=>{let r=(0,g.join)(p,t),o=(0,s.statSync)(r);return{file:t,path:r,lastModifiedAt:o.mtime,createdAt:o.ctime,addedAt:o.atime}}).sort((t,r)=>{switch(E){case"addTime":return r.addedAt.getTime()-t.addedAt.getTime();case"createTime":return r.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function R(){try{return(0,s.accessSync)(d.downloadsFolder,s.constants.R_OK),!0}catch(e){return console.error(e),!1}}var P=e=>t=>R()?((0,s.accessSync)(d.downloadsFolder,s.constants.R_OK),(0,l.jsx)(e,{...t})):(0,l.jsx)(c.Detail,{markdown:`## Permission Required

The Downloads Manager extension requires access to your Downloads folder. Please grant permission to use it.

![Grant Permission](permission.png)`,actions:(0,l.jsx)(c.ActionPanel,{children:(0,l.jsx)(c.Action.Open,{title:"Grant Permission",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"})})});var n=require("react/jsx-runtime");function $(){let[e,t]=(0,k.useState)(T());function r(o){t(a=>a.filter(f=>Array.isArray(o)?!o.includes(f.path):o!==f.path))}return(0,n.jsxs)(i.List,{children:[e.length===0&&(0,n.jsx)(i.List.EmptyView,{icon:{fileIcon:p},title:"No downloads found",description:"Well, first download some files \xAF\\_(\u30C4)_/\xAF"}),e.map(o=>(0,n.jsx)(i.List.Item,{title:o.file,icon:{fileIcon:o.path},quickLook:{path:o.path,name:o.file},accessories:[{date:o.lastModifiedAt,tooltip:`Last modified: ${o.lastModifiedAt.toLocaleString()}`}],actions:(0,n.jsxs)(i.ActionPanel,{children:[(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.Open,{title:"Open File",target:o.path}),(0,n.jsx)(i.Action.ShowInFinder,{path:o.path}),(0,n.jsx)(i.Action.CopyToClipboard,{title:"Copy File",content:{file:o.path},shortcut:{modifiers:["cmd","shift"],key:"c"}})]}),(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.OpenWith,{path:o.path,shortcut:{modifiers:["cmd"],key:"o"}}),(0,n.jsx)(i.Action.ToggleQuickLook,{shortcut:{modifiers:["cmd"],key:"y"}})]}),(0,n.jsxs)(i.ActionPanel.Section,{children:[(0,n.jsx)(i.Action.Trash,{title:"Delete Download",paths:o.path,shortcut:{modifiers:["ctrl"],key:"x"},onTrash:r}),(0,n.jsx)(i.Action.Trash,{title:"Delete All Downloads",paths:e.map(a=>a.path),shortcut:{modifiers:["ctrl","shift"],key:"x"},onTrash:r})]})]})},o.path))]})}var G=P($);
